---
import type { CollectionEntry } from 'astro:content';
import PatternImages from './PatternImages.astro';

interface Props {
  article: CollectionEntry<'patterns'>;
  prevArticle?: CollectionEntry<'patterns'>;
  nextArticle?: CollectionEntry<'patterns'>;
}

const { article, prevArticle, nextArticle } = Astro.props;
const { Content } = await article.render();

// ファイル名から.mdを除去
const baseName = article.id.replace('.md', '');

// 日付のフォーマット関数
const formatDate = (date: Date) => {
  return date.toLocaleDateString('en-US', {
    month: 'long',
    year: 'numeric'
  });
};
---

<article>
  <header>
    <h1 class="text-3xl font-bold underline">{article.data.title}</h1>
    <p>
      {formatDate(article.data.pubDate)}
    </p>
    <PatternImages 
      baseName={baseName} 
      title={article.data.title} 
      enableSwitching={true}
      x={article.data.x}
      y={article.data.y}
    />
  </header>

  <div>
    <Content />
  </div>

  <nav>
    <div>
      {prevArticle && (
        <a href={`${import.meta.env.BASE_URL}${prevArticle.id.replace('.md', '')}`}>
          ← {prevArticle.data.title}
        </a>
      )}
      {nextArticle && (
        <a href={`${import.meta.env.BASE_URL}${nextArticle.id.replace('.md', '')}`}>
          {nextArticle.data.title} →
        </a>
      )}
    </div>
  </nav>
</article> 